---
title: 2024125CTF学习笔记22
date: 2024-12-25
tags:
 - CTF
 - CTFLearn
categories:
   - 命理学 Numerology
isShowComments: true
publish: true




















---

<Boxx/>

从0开始学习CTF，了解CTF基本规则、方法，这是开始打卡学习的第37天

Web应用&架构搭建&站库分离&路由访问&配置受限&DNS解析

发现单纯学习CTF没有一个系统完整的课程，所以准备学小迪安全的渗透测试课程，希望能打一个好基础。

此外，还应该多参加各种CTF比赛，或者是每天练习CTF赛题，理论与实践相结合。

[[toc]]

- 小迪安全视频地址【[🔗传送门]([https://www.bilibili.com/video/BV123yAYMEwb/)】

<!-- more -->

# 第19章：Web应用&架构搭建&站库分离&路由访问&配置受限&DNS解析

## 数据库：

除昨天提到到的方法外，还有云数据库，如阿里云的云数据库RDS、腾讯云的云原生MySQL等。

这种方式对比昨天的方式不需要操作系统，能直接租成品的云数据库

![image-20241225195837288](/img/ctfLearnimage-20241225195837288.png)

### 情况对比

1. 如果我们是将应用和数据库都放到本地，我们拿到权限的话，可以拿到所有权限
2. 如果我们应用和数据库不在同一台服务器，也就是站库分离的形式，就不一定能拿到数据，因为数据库有外联特性或者绑定特性，即便拿到了账号密码也不一定能连接上。
3. 如果用云上的数据库，安全系数更高，登录方式不再是传统的账号密码（比如阿里云的key），还可能有一些其他的绑定，可以限制某些IP的访问，只有应用可以访问。

现在的安全趋势和传统方式已经大不相同，已经不能用传统的眼光去看待现在的形势。

有些产品现在购买`网站域名+云服务+云数据库+云存储空间`就能搭建一个完整、安全的产品

这里的云存储空间比如有阿里云的OSS资源，专门用来存储用户数据，比如音频、图片等，传统的方式是上传到应用目录下，存储到网站的目录下，变为存储到OSS资源中后，我们上传漏洞不再可用，后门上传后没有任何作用。

我们大部分的漏洞都是传统的搭建模式，现在技术的快速迭代导致的一些传统漏洞不再可用，比如数据库采用云数据库、头像上传到OSS对象中，很多漏洞就不用去考虑了，因为这些漏洞已不复存在。

所以我们要学习信息搜集，搜集的目标就是判断应用是不是符合我们漏洞利用的类型，搜集到以后才能进入后面的步骤。



## 认识目录

我们在见到源码的结构、目录后，需要根据结构、目录判断这些文件夹的作用，我们以hdhcms的源码目录举例：

```shell
admin --管理员、后台目录
bin --执行程序
database --数据相关
image --图片相关
js --前端JavaScript相关
member --会员
template --模版
upfiles --文件上传
```



## 路由访问

### 常规方式：

视频中服务器上搭建的是z-blog的应用，在post文件下新建一个1.txt的文件，文件内容不限。

我们在访问时，可以直接访问以下地址就能得到该文件`http://xiaosedi.fun/post/1.txt`，这种方式就是路由访问。

因为我们在IIS管理器中绑定的地址就是绑定目录到z-blog这个文件夹

### 非常规模式-路由访问

一般常见于mvc类源码，比如python、java等。

这种应用使用刚才的常规方式访问已经不可行了，会报404未找到的状态码。

以后可能碰到网站源码和网站url对应不上的问题，这就是因为路由配置



## 解析规则

在IIS管理器中，有MIME类型设置，这就是为什么有些网站访问jsp文件是下载，有些网站是执行，就与这个设置有关

![image-20241225210443680](/img/ctfLearn/image-20241225210443680.png)

从安全的角度考虑，如果添加一个asp的拓展名，对应的MIME类型是png，这时上传asp后，会被当成png展示，就没有脚本的作用了。

在linux中，我们在nginx中找到nginx.conf可以设置mime相关内容

```nginx
   http {
       types {
           application/json json;
           text/html html;
           text/css css;
           image/png png;
           # 可以根据需要添加更多的MIME类型
       }
       # 其他http块内的配置
   }
```



## 整体总结

![1735132759121](/img/ctfLearn/1735132759121.png)